<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Scientific Calculator by Shivam Prototype</title>
  <style>
    :root{--bg:#0f1724;--panel:#0b1220;--btn:#1f2937;--accent:#0ea5a9;--muted:#94a3b8;--text:#e6eef6}
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071226 0%, #081827 100%);color:var(--text)}
    .wrap{max-width:420px;margin:28px auto;padding:18px;border-radius:12px;background:linear-gradient(180deg,#071827 0%, #0b2030 100%);box-shadow:0 10px 30px rgba(2,6,23,.6)}
    .header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
    .brand{font-weight:700;letter-spacing:.6px}
    .mode{font-size:13px;color:var(--muted)}
    .screen{background:var(--panel);border-radius:8px;padding:12px 14px;margin-bottom:12px;min-height:72px}
    .expr{color:var(--muted);font-size:14px;min-height:18px;word-break:break-all}
    .result{font-size:22px;margin-top:4px;word-break:break-all}
    .row{display:flex;gap:8px;margin-bottom:8px}
    button.btn{flex:1;padding:12px;border-radius:8px;border:0;background:var(--btn);color:var(--text);font-size:15px;cursor:pointer}
    button.action{background:#0b6b6b}
    button.alt{background:#2b3946}
    .wide{flex:2}
    .small{padding:8px;font-size:13px}
    .controls{display:flex;gap:8px;margin-bottom:8px}
    .mem-ind{font-size:12px;color:#8ee3d9}
    .footer{font-size:12px;color:var(--muted);text-align:center;margin-top:10px}
    @media (max-width:480px){.wrap{margin:8px}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="brand">Scientific Calculator By Shivam</div>
      <div class="mode">Mode : <span id="angleMode">scientific</span></div>
    </div>

    <div class="screen">
      <div class="expr" id="expr">0</div>
      <div class="result" id="result">0</div>
    </div>

    <div class="controls">
      <button class="btn small" id="degToggle">DEG</button>
      <button class="btn small" id="mc">MC</button>
      <button class="btn small" id="mr">MR</button>
      <button class="btn small" id="mPlus">M+</button>
      <button class="btn small" id="mMinus">M-</button>
    </div>

    <!-- Button grid (partial scientific set) -->
    <div class="row">
      <button class="btn alt" data-action="clear">AC</button>
      <button class="btn alt" data-action="back">DEL</button>
      <button class="btn alt" data-value="(">(</button>
      <button class="btn alt" data-value=")">)</button>
    </div>

    <div class="row">
      <button class="btn" data-value="sin(">sin</button>
      <button class="btn" data-value="cos(">cos</button>
      <button class="btn" data-value="tan(">tan</button>
      <button class="btn" data-value="^">^</button>
    </div>

    <div class="row">
      <button class="btn" data-value="asin(">sin⁻¹</button>
      <button class="btn" data-value="acos(">cos⁻¹</button>
      <button class="btn" data-value="atan(">tan⁻¹</button>
      <button class="btn" data-value="sqrt(">√</button>
    </div>

    <div class="row">
      <button class="btn" data-value="7">7</button>
      <button class="btn" data-value="8">8</button>
      <button class="btn" data-value="9">9</button>
      <button class="btn" data-value="/">÷</button>
    </div>

    <div class="row">
      <button class="btn" data-value="4">4</button>
      <button class="btn" data-value="5">5</button>
      <button class="btn" data-value="6">6</button>
      <button class="btn" data-value="*">×</button>
    </div>

    <div class="row">
      <button class="btn" data-value="1">1</button>
      <button class="btn" data-value="2">2</button>
      <button class="btn" data-value="3">3</button>
      <button class="btn" data-value="-">−</button>
    </div>

    <div class="row">
      <button class="btn" data-value="0">0</button>
      <button class="btn" data-value=".">.</button>
      <button class="btn" data-action="ans">ANS</button>
      <button class="btn action" data-value="+">+</button>
    </div>

    <div class="row">
      <button class="btn wide" data-action="calculate">=</button>
    </div>

    <div class="footer">Prototype Project — as a single HTML file.</div>
  </div>

  <script>
    // Simple web-based scientific calculator prototype
    const exprEl = document.getElementById('expr');
    const resultEl = document.getElementById('result');
    const angleModeEl = document.getElementById('angleMode');
    let expression = '';
    let memory = 0;
    let lastAns = 0;
    let angleMode = 'DEG';

    function setExpr(val){
      expression = val;
      exprEl.textContent = expression || '0';
    }
    function setResult(val){
      resultEl.textContent = val;
    }

    // map math tokens to JavaScript Math equivalents
    function prepareForEval(input){
      if(!input) return '';
      let s = input
        .replace(/÷/g, '/')
        .replace(/×/g, '*')
        .replace(/−/g, '-')
        .replace(/\^/g, '**')
        .replace(/ANS/g, `(${lastAns})`) // allow ANS
        .replace(/π/g, 'Math.PI')
        .replace(/e(?![a-zA-Z0-9_])/g, 'Math.E');

      // handle factorial notation like n! -> fact(n)
      s = s.replace(/(\d+\.?\d*)!/g, 'fact($1)');

      // functions mapping — we need to wrap trig functions when in DEG mode
      const fnMap = ['sin','cos','tan','asin','acos','atan','sqrt','log','ln','exp'];
      fnMap.forEach(fn => {
        const re = new RegExp(fn+'\\(', 'g');
        if(/^(sin|cos|tan)$/.test(fn)){
          // trig: convert degrees to radians if needed during runtime inside a wrapper
          s = s.replace(re, `__${fn}__(`);
        } else if(fn === 'ln'){
          s = s.replace(re, 'Math.log(');
        } else if(fn === 'log'){
          s = s.replace(re, 'Math.log10(');
        } else if(fn === 'exp'){
          s = s.replace(re, 'Math.exp(');
        } else {
          s = s.replace(re, 'Math.'+fn+'(');
        }
      });

      return s;
    }

    function fact(n){
      n = Math.floor(n);
      if(n < 0) return NaN;
      let res = 1;
      for(let i=2;i<=n;i++) res *= i;
      return res;
    }

    // wrappers for trig that respect DEG/RAD
    function __sin__(x){ return angleMode === 'DEG' ? Math.sin(x * Math.PI/180) : Math.sin(x); }
    function __cos__(x){ return angleMode === 'DEG' ? Math.cos(x * Math.PI/180) : Math.cos(x); }
    function __tan__(x){ return angleMode === 'DEG' ? Math.tan(x * Math.PI/180) : Math.tan(x); }
    function __asin__(x){ const r = Math.asin(x); return angleMode === 'DEG' ? r*180/Math.PI : r; }
    function __acos__(x){ const r = Math.acos(x); return angleMode === 'DEG' ? r*180/Math.PI : r; }
    function __atan__(x){ const r = Math.atan(x); return angleMode === 'DEG' ? r*180/Math.PI : r; }

    // evaluate expression safely using Function
    function evaluate(input){
      try{
        const prepared = prepareForEval(input);
        // create a Function with our local helpers in scope
        const fn = new Function('fact','__sin__','__cos__','__tan__','__asin__','__acos__','__atan__', 'Math', `return (${prepared});`);
        const val = fn(fact,__sin__,__cos__,__tan__,__asin__,__acos__,__atan__, Math);
        return val;
      }catch(e){
        console.error(e);
        return 'Error';
      }
    }

    // clicks
    document.querySelectorAll('button').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const v = btn.getAttribute('data-value');
        const action = btn.getAttribute('data-action');
        if(v){
          // append
          setExpr(expression + v);
        } else if(action){
          handleAction(action);
        }
      });
    });

    function handleAction(action){
      if(action === 'clear'){
        setExpr(''); setResult(0);
      } else if(action === 'back'){
        setExpr(expression.slice(0,-1));
      } else if(action === 'calculate'){
        const val = evaluate(expression);
        if(val !== 'Error' && typeof val === 'number' && !isNaN(val) && isFinite(val)){
          lastAns = val;
        }
        setResult(String(val));
      } else if(action === 'ans'){
        setExpr(expression + 'ANS');
      }
    }

    // memory buttons
    document.getElementById('mc').addEventListener('click', ()=>{ memory = 0; document.querySelector('.mem-ind')?.remove(); });
    document.getElementById('mr').addEventListener('click', ()=>{ setExpr(expression + memory); });
    document.getElementById('mPlus').addEventListener('click', ()=>{ const v = evaluate(expression); if(typeof v === 'number') memory += v; showMemIndicator(); });
    document.getElementById('mMinus').addEventListener('click', ()=>{ const v = evaluate(expression); if(typeof v === 'number') memory -= v; showMemIndicator(); });

    function showMemIndicator(){
      if(!document.querySelector('.mem-ind')){
        const el = document.createElement('div'); el.className='mem-ind'; el.textContent='M'; document.querySelector('.header').appendChild(el);
      }
    }

    // DEG/RAD toggle
    document.getElementById('degToggle').addEventListener('click', ()=>{
      angleMode = angleMode === 'DEG' ? 'RAD' : 'DEG';
      angleModeEl.textContent = angleMode;
      document.getElementById('degToggle').textContent = angleMode;
    });

    // keyboard support
    document.addEventListener('keydown', (e)=>{
      const k = e.key;
      if(/^[0-9]$/.test(k) || ['+','-','*','/','.'].includes(k)){
        setExpr(expression + k);
      } else if(k === 'Enter'){
        const val = evaluate(expression);
        if(val !== 'Error' && typeof val === 'number' && !isNaN(val) && isFinite(val)){
          lastAns = val;
        }
        setResult(String(val));
      } else if(k === 'Backspace'){
        setExpr(expression.slice(0,-1));
      }
    });

    // initialize
    setExpr(''); setResult('0');
  </script>
</body>
</html>
